
<!DOCTYPE html>
<html>
<head>
    <title> | LiamHz</title>
    <link rel="stylesheet" href="/styles/main.css" type="text/css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Spectral&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="grid-container">
            <div class="column-left">
                <nav class="card-navigation">
                    <div class="nav-left-col">
                      <div class="about active-card">
                          <a href="/index.html">
                              <img src="/img/cards/glitch-square.jpg"/>
                              <div class="overlay"></div>
                              <p>liam<sub>hz</sub></p>
                          </a>
                      </div>
                    </div>
                    <div class="nav-right-col">
                      <div class="blog">
                        <a href="/blog.html">
                          <img src="/img/cards/asemic-danielle-go.png"/>
                          <div class="overlay"></div>
                          <p>blog</p>
                        </a>
                      </div>
                      <!--
                      <div class="cooking">
                        <a href="/cooking.html">
                          <img src="/img/cards/korean-beef-bowl.png"/>
                          <div class="overlay"></div>
                          <p>cooking</p>
                        </a>
                      </div>
                    </div>
                    -->
                    <div class="art-home-school">
                      <a href="/art-home-school.html">
                        <img src="/img/cards/figures-gg-bridge.jpg"/>
                        <div class="overlay"></div>
                        <p>art home school</p>
                      </a>
                    </div>
                    <!--
                    <div class="work">
                        <a href="/work.html">
                            <img src="/img/cards/numerai-nftee.png"/>
                            <div class="overlay"></div>
                            <p>work</p>
                        </a>
                    </div>
                    -->
                </nav>
            </div>

            <div class="content column-right">
<h1>Computer Graphics</h1>
<h2>Roadmap</h2>
<p>Graphics programming requires knowledge of several areas. Below are
some resources for them.</p>
<p>Note: Order to go through topics isn't fixed. Learn whatever you're
motivated to.</p>
<h3>Streamlined Real-Time Rendering Roadmap</h3>
<ul>
<li>A Tour of C++ (or some previous experience with C++)</li>
<li><a href="https://learnopengl.com/">LearnOpenGL</a> or <a
href="https://vulkan-tutorial.com/">Vulkan Tutorial</a> - Graphics
API</li>
<li><a href="https://graphicscodex.com/">The Graphics Codex</a> -
Computer graphics theory</li>
<li><a
href="http://graphicscodex.com/projects/projects/index.html">Graphics
Codex Projects</a> Introductory computer graphics projects</li>
<li><a href="https://hexler.net/products/kodelife">Immersive Linear
Algebra</a> - Linear algebra</li>
<li><a href="https://www.realtimerendering.com/">Real-Time Rendering</a>
- Modern rendering techniques</li>
</ul>
<h3>C++</h3>
<ul>
<li>A Tour of C++</li>
<li>Accelerated C++</li>
<li>Effective C++</li>
<li>Effective Modern C++</li>
</ul>
<h3>Linear Algebra</h3>
<ul>
<li><a href="http://joshua.smcvt.edu/linearalgebra/book.pdf">Textbook:
Linear Algebra, Jim Hefferon</a></li>
<li><a href="https://hexler.net/products/kodelife">Immersive Linear
Algebra</a></li>
<li><a
href="http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions/">3b1b's
Essence of Linear Algebra</a> - Do practice problems afterwards!</li>
</ul>
<h3>Computer Graphics Theory</h3>
<p>Note: Complete this before doing <strong>Path Tracing</strong> or
<strong>Real-time rendering</strong></p>
<ul>
<li><a href="https://graphicscodex.com/">The Graphics Codex</a></li>
<li><a
href="http://graphicscodex.com/projects/projects/index.html">Graphics
Codex Projects</a></li>
</ul>
<h3>Path Tracing</h3>
<ul>
<li><a href="https://raytracing.github.io/">Ray Tracing in One
Weekend</a> 1, 2, and 3</li>
<li><a href="http://www.pbr-book.org/3ed-2018/contents.html">PBRT</a> -
Use this as a references while building my own path tracer, similar to
"Ray Tracing Gems", and not a "build together"</li>
<li><a href="https://www.realtimerendering.com/raytracinggems/">Ray
Tracing Gems</a></li>
</ul>
<h3>Real-time Rendering</h3>
<ul>
<li><a
href="https://github.com/ssloy/tinyrenderer/wiki/Lesson-0-getting-started">Tiny
Renderer - How OpenGL Works</a></li>
<li><a href="https://learnopengl.com/">LeanOpenGL</a></li>
<li><a href="https://developer.nvidia.com/gpugems/gpugems/foreword">GPU
Gems</a></li>
</ul>
<p>NOTE: Portfolio projects should be more than "toy projects" that just
implement a few techniques. Make them memorable experiences.</p>
<h2>Project Ideas</h2>
<ul>
<li>Physically based Vulkan real-time renderer with deferred
rendering</li>
<li>Procedural landscape / city / planet generation, maybe using WFC.
Selected resources <a
href="https://www.one-tab.com/page/vkXJYghpR8ecWbWAs82Rsg">here</a>, and
collection of resources <a
href="https://firespark.de/?id=article&amp;article=ProceduralGenerationResources">here</a></li>
<li>Remake an iconic video game / movie scene from scratch, and render
it with your engine. Scene ideas: Assassin's Creed, The Last of Us, Life
is Strange</li>
</ul>
<h2>Morgan McGuire's Roadmap</h2>
<p><a
href="https://twitter.com/CasualEffects/status/1061645994247577601">Source</a>
A great sequence for learning rendering for 3D graphics is:</p>
<ol type="1">
<li>Calculus and C++ programming (1 year, prereq)</li>
<li>Ray Tracing in One Weekend 1, 2, 3 (5 days)</li>
<li>Graphics Codex (3 weeks)</li>
<li>RTR4 + Vulkan or DX12 &amp; PBRT (years)</li>
</ol>
<p>Time estimates are coding time for the projects.</p>
<h2>Courses</h2>
<ul>
<li><a href="https://www.scratchapixel.com/">Scratchapixel</a></li>
<li><a href="https://classroom.udacity.com/courses/cs291">Udacity -
Interactive 3D Graphics</a></li>
<li><a
href="http://www.cs.cornell.edu/courses/cs6630/2015fa/index.shtml">CS6630
- Realistic Image Synthesis</a></li>
<li><a href="http://www.cs.cornell.edu/courses/cs4620/2019fa/">CS4620 -
Introduction to Computer Graphics</a> - Good source for learning
projects</li>
</ul>
<h2>Resources</h2>
<ul>
<li><a href="https://www.creators3d.com/online-viewer">Convert 3D Model
to glTF</a></li>
<li><a href="http://kesen.realtimerendering.com/">Kesen's Repository of
Graphics Programming Papers</a></li>
<li><a
href="https://twitter.com/erkaman2/status/1068648036824424450?s=20">Resources
on BRDFs</a></li>
<li><a
href="http://stephaniehurlburt.com/blog/2016/11/14/list-of-engineers-willing-to-mentor-you">List
of Engineers Willing to Mentor You</a></li>
</ul>
<h2>Articles</h2>
<h3>Vulkan</h3>
<h4>Unread</h4>
<ul>
<li><a
href="https://www.fasterthan.life/blog/2017/7/11/i-am-graphics-and-so-can-you-part-1">I
am Graphics and So Can You, Part 1</a></li>
<li><a href="https://github.com/SaschaWillems/Vulkan">Vulkan C++
Examples and Demos</a></li>
<li><a
href="https://github.com/vinjn/awesome-vulkan/blob/master/README.md#tutorial">awesome-vulkan</a></li>
<li><a href="https://gpuopen.com/performance/">RDNA Performance
Guide</a></li>
</ul>
<h4>Read</h4>
<ul>
<li><a
href="https://www.jeremyong.com/c++/vulkan/graphics/rendering/2018/03/26/how-to-learn-vulkan/">How
to Learn Vulkan</a></li>
<li><a href="https://renderdoc.org/vulkan-in-30-minutes.html">Vulkan in
30 Minutes</a></li>
<li><a href="https://www.youtube.com/watch?v=qEOsHFFomWg">Using Vulkan
Hpp, The C++ Header for Vulkan</a></li>
</ul>
<h3>General</h3>
<h4>Unread</h4>
<ul>
<li><a
href="https://twitter.com/m_ninepoints/status/1215429886715629569?s=20">ninepoints
on how to learn graphics programming</a></li>
<li><a
href="http://lousodrome.net/blog/light/2013/09/22/a-list-of-important-graphics-research-papers/">A
list of important graphics research papers</a></li>
<li><a
href="https://erkaman.github.io/posts/beginner_computer_graphics.html">How
to Start Learning Computer Graphics Programming</a></li>
<li><a
href="https://renderdoc.org/blog/Graphics-in-Plain-Language/">Graphics
in Plain Language</a></li>
<li><a
href="http://stephaniehurlburt.com/blog/2016/10/28/casual-introduction-to-low-level-graphics-programming">Casual
Introducation to Low Level Graphics Programming</a></li>
<li><a
href="https://fgiesen.wordpress.com/2011/07/09/a-trip-through-the-graphics-pipeline-2011-index/">A
Trip Through the Graphics Pipeline</a></li>
<li><a
href="http://machinethink.net/blog/3d-rendering-without-shaders/">The
Lost Art of 3D Rendering Without Shaders</a></li>
<li><a href="http://alextardif.com/RenderingAbstractionLayers.html">An
Opiniated Post on Modern Rendering Abstraction Layers</a></li>
<li><a href="http://www.aortiz.me/2018/12/21/CG.html">A Primer on
Efficient Rendering Algorithms and Clustered Shading</a></li>
<li><a
href="https://astralcode.blogspot.com/2018/11/reverse-engineering-rendering-of.html">Reverse
Engineering the Rendering of "The Witcher 3"</a></li>
<li><a
href="https://softwareengineering.stackexchange.com/questions/60544/why-do-game-developers-prefer-windows/88055#88055">History
of Graphics APIs</a></li>
<li><a
href="https://interplayoflight.wordpress.com/2013/12/30/readings-on-physically-based-rendering/">Readings
on Physically Based Rendering</a></li>
<li><a
href="https://paroj.github.io/gltut/Illumination/Tut09%20Normal%20Transformation.html">Normal
transformation</a></li>
<li><a
href="https://lxjk.github.io/2017/10/01/Stop-Using-Normal-Matrix.html">Stop
Using Normal Matrix</a></li>
</ul>
<h4>Read</h4>
<ul>
<li><a
href="https://miketuritzin.com/post/how-to-learn-computer-graphics-techniques-and-programming/">Drinking
from the Firehose: Learning Computer Graphics Techniques and
Programming</a></li>
<li><a
href="https://www.reddit.com/r/cscareerquestions/comments/9wmjrc/computer_graphicsvrar_career_field/ea6g3j6/">csp's
thoughts on computer graphics as a career</a></li>
<li><a href="https://youtu.be/eo_MTI-d28s">An Explanation of the
Rendering Equation</a></li>
</ul>
<h3>Techniques</h3>
<h3>Unread</h3>
<ul>
<li><a href="https://google.github.io/filament/Filament.md">Physically
Based Rendering in Filament</a></li>
</ul>
<h3>Read</h3>
<ul>
<li>[A Brief Primer on Efficient Rendering Algorithms and Clustered
Shading][79]</li>
</ul>
<h3>Job Hunt</h3>
<ul>
<li><a href="http://alextardif.com/GraphicsJobGuide.html">Applying for
Entry Level Graphics Jobs</a></li>
<li><a
href="https://erkaman.github.io/posts/junior_graphics_programmer_interview.html">Common
Junior Graphics Programming Interview Questions</a></li>
</ul>
<h2>Presentations / Talks</h2>
<h3>Unread</h3>
<ul>
<li><a href="https://youtu.be/GNO_CYUjMK8">JSConf US 2013, Steven
Wittens: Making WebGL Dance</a></li>
</ul>
<h2>Projects for Beginners</h2>
<ul>
<li>Make a sphere mesh using spherical coordinates, and render it.</li>
<li>Implement shader for simple diffuse and specular shading.</li>
<li>Directional Lights, point lights, and spot lights DONE Heightmap
Rendering</li>
<li>Write a simple parser for a simple mesh format such as Wavefront
.obj, import it into your program and render it. In particular, try and
import and render meshes with textures.</li>
<li>Implement a simple Minecraft renderer. It is surprisingly simple to
render Minecraft-like worlds, and it is also very learningful.</li>
<li>Render reflections using cubemaps</li>
<li>Shadow rendering using shadow maps.</li>
<li>Implement view frustum culling. This is a simple, yet very practical
optimization technique.</li>
<li>Implement rendering of particle systems</li>
<li>Learn how to implement Gamma Correction.</li>
<li>Implement normal mapping</li>
<li>Learn how to render lots of meshes efficiently with instanced
rendering</li>
<li>Animate meshes with mesh skinning.</li>
</ul>
<h3>Read</h3>
<ul>
<li><a href="https://youtu.be/0R23npUCCnw">GDC 2018 - How Hard is Vulkan
Really</a></li>
</ul>
<h2>Portfolio Projects I Like</h2>
<ul>
<li><a href="https://lin-reid.squarespace.com/shader-highlights">Linden
Reid's Shaders</a></li>
<li><a href="https://thume.ca/ray-tracer-site/">Tristan Hume's
Photo-realistic Path Tracer</a></li>
</ul>
<h2>Job Postings</h2>
<h3>Rendering Programmer Internship - Epic Games</h3>
<p>Qualifications:</p>
<ul>
<li>Strong C++ skills</li>
<li>In-depth experience with real-time rendering</li>
<li>Knowledge and proficient application of 3D math, rendering
algorithms, and data structures</li>
<li>Exposure to a broad range of graphics APIs and shader languages
including DirectX and OpenGL/GLSL</li>
<li>Performance minded development and optimization skills</li>
<li>Strong communication and follow-through working with others to
develop and iterate on features/tools</li>
<li>Examples of projects in gaming or game engine technology a plus</li>
</ul>
<h3>Graphics Programmer (All Levels) - Rockstar</h3>
<p>Skills</p>
<ul>
<li>Experience with C/C++ programming.</li>
<li>Experience with HLSL, Cg or other vendor specific shader programming
language.</li>
<li>Ability to work with artists, designers and other content creators
to make sure they can get the most out of the technology.</li>
</ul>
<p>Pluses Please note that these are desirable skills and are not
required to apply for the position.</p>
<ul>
<li>Experience with 3D graphics APIs (Direct3D 11+, OpenGL, Vulkan
and/or vendor specific).</li>
<li>At least one shipped title; preferably on the Xbox and/or
Playstation consoles.</li>
<li>Experience with multithreaded programming.</li>
<li>Experience optimizing both performance factors and memory footprints
using hardware and software profilers (PIX, GCM Replay, Tuner, Vtune,
etc.).</li>
</ul>
<h2>Shaders</h2>
<h3>Tutorials</h3>
<ul>
<li><a
href="https://github.com/lettier/3d-game-shaders-for-beginners">3D Game
Shaders for Beginners</a></li>
<li><a href="https://shadered.org/">The Making of The Drive
Home</a></li>
<li><a
href="https://www.youtube.com/playlist?list=PLGmrMu-IwbgsVjE7SAtFaWyhZXyBjJNnO">Shader
Coding - The Art of Code</a></li>
<li><a href="https://www.shadertoy.com/user/Shane">Shane's commented
shaders</a></li>
<li><a href="https://simonschreibt.de/game-art-tricks/">Game Art
Tricks</a></li>
<li><a
href="https://www.alanzucconi.com/2019/10/08/journey-sand-shader-1/">A
Journey into Journey's Sand Shader</a></li>
</ul>
<h3>Inspiration</h3>
<ul>
<li><a href="https://www.shadertoy.com/">Shadertoy</a></li>
<li><a
href="https://www.iquilezles.org/www/articles/raymarchingdf/raymarchingdf.htm">iq's
SDF Demos</a></li>
</ul>
<h3>Resources</h3>
<ul>
<li><a href="http://docs.gl/">docs.gl</a></li>
<li><a href="https://hexler.net/products/kodelife">KodeLife - Real-time
GPU Shader Editor</a> - Real-time graphics programming IDE. OpenGL
without the boilerplate.</li>
</ul>
<h3>Completed Resources</h3>
<ul>
<li><a
href="https://notes.underscorediscovery.com/shaders-a-primer/">Shaders:
A Primer</a> - Overview of what vertex and fragment shaders do.</li>
<li><a href="https://github.com/stackgl/shader-school">Shader School</a>
- Interactive course explaining the theory and practice of vertex and
fragment shaders, Blinn-Phong lighting, and matrices for affine
transformations and changing between coordinate spaces.</li>
<li><a
href="http://hughsk.io/fragment-foundry/chapters/01-hello-world.html">Fragment
Foundry</a> Intro to fragment shaders and SDFs, Shadertoy style</li>
<li><a
href="http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions/">Ray
Marching and Signed Distance Functions</a></li>
<li><a href="https://thebookofshaders.com/">The Book of Shaders</a> - An
interactive book that teaches different fragment shader techniques.</li>
</ul>
<h3>Reference Shaders</h3>
<ul>
<li><a href="https://www.shadertoy.com/view/ltyXD3">Raymarching
Primitives Commented, iq</a> - Best practices for raymarching</li>
<li><a href="https://www.shadertoy.com/view/Mds3zn">Chromatic
Abberation</a></li>
</ul>
<h3>Misc Notes</h3>
<h4>Ternaries, Branching, and Early Termination are Fine in Shaders</h4>
<p>Contrary to some older resources (e.g. Shader School), this <a
href="https://www.shadertoy.com/view/wlsGDl">shader</a> by iq shows that
using ternaries, branching (if), and early termination in for loops is
more performant than step and other fancy operations in GLSL. In older
hardware and versions of GLSL this was true in some cases, but generally
isn't anymore</p>
<h4>The Size of Demos vs Intros</h4>
<p>From iq's <a
href="https://www.iquilezles.org/www/material/nvscene2008/rwwtt.pdftalk">talk</a>
"Rendering Worlds with Two Triangles in 4096 bytes".</p>
<ul>
<li>Visual beauty is not a linear function of the size in kilobytes, but
rather sigmoidal. Believes that the optimal "vibes per kilobyte" is
around 100kb demos.</li>
</ul>
<h3>Techniques</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode glsl"><code class="sourceCode glsl"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cosine based palette</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">// From iq: shadertoy.com/view/ll2GD3</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> <span class="fu">palette</span><span class="op">(</span><span class="dt">float</span> t<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Palette parameters</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> a <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.5</span><span class="op">);</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> b <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.5</span><span class="op">);</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> c <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">1.0</span><span class="op">);</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> d <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.0</span><span class="op">,</span> <span class="fl">0.10</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">);</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> a <span class="op">+</span> b<span class="op">*</span><span class="bu">cos</span><span class="op">(</span><span class="fl">6.28318</span><span class="op">*(</span>c<span class="op">*</span>t<span class="op">+</span>d<span class="op">));</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">// 3D Rotation matrices</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="dt">mat4</span> <span class="fu">rotateX</span><span class="op">(</span><span class="dt">float</span> angle<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> c <span class="op">=</span> <span class="bu">cos</span><span class="op">(</span>angle<span class="op">);</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> s <span class="op">=</span> <span class="bu">sin</span><span class="op">(</span>angle<span class="op">);</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">mat4</span><span class="op">(</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span><span class="op">,</span> c<span class="op">,-</span>s<span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span><span class="op">,</span> s<span class="op">,</span> c<span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="dt">mat4</span> <span class="fu">rotateY</span><span class="op">(</span><span class="dt">float</span> angle<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> c <span class="op">=</span> <span class="bu">cos</span><span class="op">(</span>angle<span class="op">);</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> s <span class="op">=</span> <span class="bu">sin</span><span class="op">(</span>angle<span class="op">);</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">mat4</span><span class="op">(</span> c<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> s<span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>                <span class="op">-</span>s<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> c<span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="dt">mat4</span> <span class="fu">rotateZ</span><span class="op">(</span><span class="dt">float</span> angle<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> c <span class="op">=</span> <span class="bu">cos</span><span class="op">(</span>angle<span class="op">);</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> s <span class="op">=</span> <span class="bu">sin</span><span class="op">(</span>angle<span class="op">);</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">mat4</span><span class="op">(</span> c<span class="op">,-</span>s<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                 s<span class="op">,</span> c<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="co">// Constructive Solid Geometry (CSG) operations</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">intersectSDF</span><span class="op">(</span><span class="dt">float</span> distA<span class="op">,</span> <span class="dt">float</span> distB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">max</span><span class="op">(</span>distA<span class="op">,</span> distB<span class="op">);</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">unionSDF</span><span class="op">(</span><span class="dt">float</span> distA<span class="op">,</span> <span class="dt">float</span> distB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">min</span><span class="op">(</span>distA<span class="op">,</span> distB<span class="op">);</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">differenceSDF</span><span class="op">(</span><span class="dt">float</span> distA<span class="op">,</span> <span class="dt">float</span> distB<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">max</span><span class="op">(</span>distA<span class="op">,</span> <span class="op">-</span>distB<span class="op">);</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co">// Blinn-Phong Lighting</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Light <span class="op">{</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> position<span class="op">;</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> intensity<span class="op">;</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> <span class="fu">getLightContrib</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">vec3</span> normal<span class="op">,</span> <span class="dt">vec3</span> viewPos<span class="op">,</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>                     <span class="dt">vec3</span> k_d<span class="op">,</span> <span class="dt">vec3</span> k_s<span class="op">,</span> <span class="dt">float</span> shininess<span class="op">,</span> Light light<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> N <span class="op">=</span> normal<span class="op">;</span>                        <span class="co">// Normal</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> L <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span>light<span class="op">.</span><span class="fu">position</span> <span class="op">-</span> p<span class="op">);</span> <span class="co">// Light vector</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> V <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span>viewPos <span class="op">-</span> p<span class="op">);</span>        <span class="co">// View vector</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> R <span class="op">=</span> <span class="bu">normalize</span><span class="op">(</span><span class="bu">reflect</span><span class="op">(-</span>L<span class="op">,</span> N<span class="op">));</span>     <span class="co">// Reflect vector</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> diff <span class="op">=</span> <span class="bu">max</span><span class="op">(</span><span class="bu">dot</span><span class="op">(</span>L<span class="op">,</span> N<span class="op">),</span> <span class="fl">0.0</span><span class="op">);</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> spec <span class="op">=</span> <span class="bu">pow</span><span class="op">(</span><span class="bu">max</span><span class="op">(</span><span class="bu">dot</span><span class="op">(</span>R<span class="op">,</span> V<span class="op">),</span> <span class="fl">0.0</span><span class="op">),</span> shininess<span class="op">);</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> diffuse  <span class="op">=</span> k_d <span class="op">*</span> diff<span class="op">;</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> specular <span class="op">=</span> k_s <span class="op">*</span> spec<span class="op">;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> light<span class="op">.</span><span class="fu">intensity</span> <span class="op">*</span> <span class="op">(</span>diffuse <span class="op">+</span> specular<span class="op">);</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> <span class="fu">getLighting</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">,</span> <span class="dt">vec3</span> eye<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> k_a <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.3</span><span class="op">);</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> k_d <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.7</span><span class="op">);</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> k_s <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">1.0</span><span class="op">);</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> shininess <span class="op">=</span> <span class="fl">8.0</span><span class="op">;</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> ambientLightIntensity <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.2</span><span class="op">);</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec3</span> lighting <span class="op">=</span> k_a <span class="op">*</span> ambientLightIntensity<span class="op">;</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>    Light light1<span class="op">;</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>    light1<span class="op">.</span><span class="fu">intensity</span> <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.4</span><span class="op">);</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>    light1<span class="op">.</span><span class="fu">position</span>  <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">4.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="fl">4.0</span><span class="op">);</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    Light light2<span class="op">;</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>    light2<span class="op">.</span><span class="fu">intensity</span> <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">0.4</span><span class="op">);</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>    light2<span class="op">.</span><span class="fu">position</span>  <span class="op">=</span> <span class="dt">vec3</span><span class="op">(</span><span class="fl">2.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">);</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    lighting <span class="op">+=</span> <span class="fu">getLightContrib</span><span class="op">(</span>p<span class="op">,</span> eye<span class="op">,</span> k_d<span class="op">,</span> k_s<span class="op">,</span> shininess<span class="op">,</span> light1<span class="op">);</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>    lighting <span class="op">+=</span> <span class="fu">getLightContrib</span><span class="op">(</span>p<span class="op">,</span> eye<span class="op">,</span> k_d<span class="op">,</span> k_s<span class="op">,</span> shininess<span class="op">,</span> light2<span class="op">);</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> lighting<span class="op">;</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="co">// Get direction for ray going from origin to fragCoord</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> <span class="fu">getRayDirection</span><span class="op">(</span><span class="dt">float</span> fov<span class="op">,</span> <span class="dt">vec2</span> resolution<span class="op">,</span> <span class="dt">vec2</span> fragCoord<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Move origin from bottom left to center of screen</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>    <span class="dt">vec2</span> xy <span class="op">=</span> fragCoord <span class="op">-</span> resolution <span class="op">/</span> <span class="fl">2.0</span><span class="op">;</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Get the z-distance from pixel given resolution and vertical FoV</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Diagram shows that: tan(radians(fov)/2) == (resolution.y * 0.5) / z</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Diagram: https://stackoverflow.com/a/10018680</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Isolating for z gives</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> z <span class="op">=</span> <span class="op">(</span>resolution<span class="op">.</span><span class="fu">y</span> <span class="op">*</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">/</span> <span class="bu">tan</span><span class="op">(</span><span class="bu">radians</span><span class="op">(</span>fov<span class="op">)</span> <span class="op">/</span> <span class="fl">2.0</span><span class="op">);</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">normalize</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>xy<span class="op">,</span> <span class="op">-</span>z<span class="op">));</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a><span class="co">// Estimate normal of surface at point p by sampling nearby points</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a><span class="dt">vec3</span> <span class="fu">estimateNormal</span><span class="op">(</span><span class="dt">vec3</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="bu">normalize</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sceneSDF</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span> <span class="op">+</span> EPSILON<span class="op">,</span> p<span class="op">.</span><span class="fu">y</span><span class="op">,</span> p<span class="op">.</span><span class="fu">z</span><span class="op">))</span> <span class="op">-</span> <span class="fu">sceneSDF</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span> <span class="op">-</span> EPSILON<span class="op">,</span> p<span class="op">.</span><span class="fu">y</span><span class="op">,</span> p<span class="op">.</span><span class="fu">z</span><span class="op">)),</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sceneSDF</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">,</span> p<span class="op">.</span><span class="fu">y</span> <span class="op">+</span> EPSILON<span class="op">,</span> p<span class="op">.</span><span class="fu">z</span><span class="op">))</span> <span class="op">-</span> <span class="fu">sceneSDF</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">,</span> p<span class="op">.</span><span class="fu">y</span> <span class="op">-</span> EPSILON<span class="op">,</span> p<span class="op">.</span><span class="fu">z</span><span class="op">)),</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sceneSDF</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">,</span> p<span class="op">.</span><span class="fu">y</span><span class="op">,</span> p<span class="op">.</span><span class="fu">z</span> <span class="op">+</span> EPSILON<span class="op">))</span> <span class="op">-</span> <span class="fu">sceneSDF</span><span class="op">(</span><span class="dt">vec3</span><span class="op">(</span>p<span class="op">.</span><span class="fu">x</span><span class="op">,</span> p<span class="op">.</span><span class="fu">y</span><span class="op">,</span> p<span class="op">.</span><span class="fu">z</span> <span class="op">-</span> EPSILON<span class="op">))</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>    <span class="op">));</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a><span class="co">// Ray marching parameters</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">int</span> MAX_MARCHING_STEPS <span class="op">=</span> <span class="dv">255</span><span class="op">;</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">float</span> MIN_DIST <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">float</span> MAX_DIST <span class="op">=</span> <span class="fl">100.0</span><span class="op">;</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">float</span> EPSILON <span class="op">=</span> <span class="fl">0.0001</span><span class="op">;</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a><span class="co">// Ray marching: return shortest distance from the eye to the any surface along ray</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> <span class="fu">shortestDistanceToSurface</span><span class="op">(</span><span class="dt">vec3</span> viewPos<span class="op">,</span> <span class="dt">vec3</span> ray<span class="op">,</span><span class="dt">float</span> initialDepth<span class="op">,</span> <span class="dt">float</span> maxDepth<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> depth <span class="op">=</span> initialDepth<span class="op">;</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_MARCHING_STEPS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Distance from closest surface</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Negative dist indicates surface intersection</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>        <span class="dt">float</span> dist <span class="op">=</span> <span class="fu">sceneSDF</span><span class="op">(</span>viewPos <span class="op">+</span> depth <span class="op">*</span> ray<span class="op">);</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="op">(</span>dist <span class="op">&lt;</span> EPSILON<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> depth<span class="op">;</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>        depth <span class="op">+=</span> dist<span class="op">;</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="op">(</span>depth <span class="op">&gt;=</span> maxDepth<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> maxDepth<span class="op">;</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> maxDepth<span class="op">;</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2><!-- Links --></h2>
            </div>
        </div>
    </div>
    <script data-goatcounter="https://liamhinzman.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
</body>

</html>
